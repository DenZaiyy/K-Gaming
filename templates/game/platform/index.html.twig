{% extends 'base.html.twig' %}

{% block title %}Liste de jeux {{ platform.label }}{% endblock %}

{% block body %}
	<section class="listGames">

		<h1>{{ platform.label }}</h1>
		<div class="container">
			<div class="row">
				<div class="col-md-3">
					{% include 'game/platform/_filter.html.twig' with {form: form, min: min, max: max} only %}
				</div>
				<div class="col-md-9">
					<div class="d-flex justify-content-end mb-4 gap-2">
						{{ knp_pagination_sortable(games, 'Prix', 'g.price') }}
						{{ knp_pagination_sortable(games, 'Date de sortie', 'g.date_release') }}
					</div>
					{% if gameAvailable %}
						<div class="cards">
							{% for game in games %}
								<a href="{{ path('app_show_game_platform', {gameSlug: game.slug, platformSlug: platform.slug }) }}">
									<div class="gameCard">
										<div class="cover-img">
											<img src="//images.igdb.com/igdb/image/upload/t_cover_big/{{ render(controller('App\\Controller\\GameController::getImageIDGame', { gameLabel: game.label })) }}.jpg"
											     draggable="false"
											     alt="cover for game: {{ game.label }}">
										</div>
										<div class="infos">
											<div class="label">
												{{ game.label }}
											</div>
											<div class="price">
												{{ game.price }} €
											</div>
										</div>
										{% if game.dateRelease > date('now') %}
											<div class="preco">
												<div class="badge">Préco</div>
												<div class="date">
													{{ dateFR(game.dateRelease) }}
												</div>
											</div>
										{% endif %}
									</div>
								</a>
							{% endfor %}
						</div>
						<div class="pagination-platform mt-5">
							{{ knp_pagination_render(games) }}
						</div>
					{% else %}
						<p>Aucun jeu pour cette plateforme</p>
					{% endif %}
				</div>
			</div>
		</div>
	</section>
{% endblock %}
